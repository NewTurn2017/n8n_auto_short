# YouTube 자동화 워크플로우 가이드

**작성일**: 2026-01-27  
**버전**: 1.0  
**총 워크플로우**: 4개 (120 노드)

---

## 목차

1. [개요](#개요)
2. [워크플로우 1: 초기 설정](#워크플로우-1-초기-설정-setup)
3. [워크플로우 2: YouTube 영상 재창작](#워크플로우-2-youtube-영상-재창작)
4. [워크플로우 3: 쇼핑 숏츠](#워크플로우-3-쇼핑-숏츠)
5. [워크플로우 4: 에러 핸들러](#워크플로우-4-에러-핸들러)
6. [비용 분석](#비용-분석)
7. [인프라 요구사항](#인프라-요구사항)

---

## 개요

이 프로젝트는 YouTube 콘텐츠 자동화를 위한 4개의 n8n 워크플로우로 구성되어 있습니다.

### 워크플로우 요약

| 워크플로우 | ID | 노드 수 | 역할 |
|-----------|-----|--------|------|
| 초기 설정 | `w0QpowawopYEH6ai` | 12 | Google Sheets 템플릿 생성 |
| YouTube 재창작 | `0tjUeM01oq32zrOK` | 72 | AI로 YouTube 영상 재생성 |
| 쇼핑 숏츠 | `0spzlwZO5DwCoSdt` | 32 | 쇼핑 영상 프레임 정제 |
| 에러 핸들러 | `kJaaNoxojbrPhSk9` | 4 | 오류 처리 및 알림 |

### 전체 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                      YouTube 자동화 시스템                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐      │
│  │  초기 설정    │    │ YouTube 재창작 │    │  쇼핑 숏츠    │      │
│  │ (1회 실행)   │    │ (자동 트리거)  │    │ (자동 트리거)  │      │
│  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘      │
│         │                   │                   │               │
│         ▼                   ▼                   ▼               │
│  ┌──────────────────────────────────────────────────────┐      │
│  │              Google Sheets (작업 대기열)               │      │
│  │  • YouTube Recreation Queue (17개 컬럼)              │      │
│  │  • Shopping Shorts Queue (10개 컬럼)                 │      │
│  └──────────────────────────────────────────────────────┘      │
│                            │                                    │
│                            ▼                                    │
│                   ┌──────────────┐                              │
│                   │  에러 핸들러   │                              │
│                   │ (오류 발생 시) │                              │
│                   └──────────────┘                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 워크플로우 1: 초기 설정 (Setup)

### 기본 정보

| 항목 | 값 |
|-----|-----|
| **이름** | Setup: Create YouTube Automation Sheets |
| **ID** | `w0QpowawopYEH6ai` |
| **노드 수** | 12 |
| **트리거** | 수동 실행 (1회만 실행) |
| **상태** | 준비 완료 |

### 역할

Google Drive에 2개의 Google Sheets를 자동으로 생성합니다:
1. **YouTube Recreation Queue**: 영상 재창작 작업 대기열 (17개 컬럼)
2. **Shopping Shorts Queue**: 쇼핑 숏츠 작업 대기열 (10개 컬럼)

### 처리 흐름

```
수동 트리거
    │
    ├─────────────────────────────────────────┐
    │                                         │
    ▼                                         ▼
┌─────────────┐                        ┌─────────────┐
│ Sheet 1 생성 │                        │ Sheet 2 생성 │
│ (YouTube)   │                        │ (Shopping)  │
└──────┬──────┘                        └──────┬──────┘
       │                                      │
       ▼                                      ▼
┌─────────────┐                        ┌─────────────┐
│ 헤더 추가    │                        │ 헤더 추가    │
│ (17개 컬럼)  │                        │ (10개 컬럼)  │
└──────┬──────┘                        └──────┬──────┘
       │                                      │
       ▼                                      ▼
┌─────────────┐                        ┌─────────────┐
│ 샘플 행 추가  │                        │ 샘플 행 추가  │
└──────┬──────┘                        └──────┬──────┘
       │                                      │
       └─────────────┬────────────────────────┘
                     │
                     ▼
              ┌─────────────┐
              │ 결과 출력    │
              │ (Sheet IDs) │
              └─────────────┘
```

### 노드 상세

| # | 노드 이름 | 타입 | 역할 |
|---|----------|------|------|
| 1 | Manual Trigger | 트리거 | 수동 실행 시작 |
| 2 | Create Sheet 1 | Google Sheets | YouTube Recreation Queue 생성 |
| 3 | Prepare Headers 1 | Set | 17개 컬럼 헤더 준비 |
| 4 | Add Headers Sheet 1 | Google Sheets | 헤더 행 추가 |
| 5 | Prepare Sample 1 | Set | 테스트용 샘플 데이터 준비 |
| 6 | Add Sample Row Sheet 1 | Google Sheets | 샘플 행 추가 |
| 7 | Create Sheet 2 | Google Sheets | Shopping Shorts Queue 생성 |
| 8 | Prepare Headers 2 | Set | 10개 컬럼 헤더 준비 |
| 9 | Add Headers Sheet 2 | Google Sheets | 헤더 행 추가 |
| 10 | Prepare Sample 2 | Set | 테스트용 샘플 데이터 준비 |
| 11 | Add Sample Row Sheet 2 | Google Sheets | 샘플 행 추가 |
| 12 | Output Sheet Info | Set | 생성된 Sheet ID 출력 |

### 생성되는 컬럼

**YouTube Recreation Queue (17개 컬럼)**:
```
ID, YouTube_URL, Status, Original_Script, Reference_Images, 
Character_Analysis, New_Script, Image_Prompts, Generated_Images, 
Video_Clips, Audio_URL, Final_Video_URL, YouTube_Video_ID, 
Error_Message, Cost, Created_At, Completed_At
```

**Shopping Shorts Queue (10개 컬럼)**:
```
ID, Video_URL, Status, Frame_Count, Original_Frames, 
Clean_Frames, Final_Video_URL, Error_Message, Created_At, Completed_At
```

### 사용 방법

1. n8n에서 워크플로우 열기
2. "Execute Workflow" 버튼 클릭
3. 생성된 Sheet ID를 환경 변수로 저장:
   - `GOOGLE_SHEETS_ID`: YouTube Recreation Queue의 ID

---

## 워크플로우 2: YouTube 영상 재창작

### 기본 정보

| 항목 | 값 |
|-----|-----|
| **이름** | YouTube Recreation |
| **ID** | `0tjUeM01oq32zrOK` |
| **노드 수** | 72 |
| **트리거** | Google Sheets (1분마다 폴링) |
| **예상 비용** | ~$0.89/영상 |
| **상태** | 부분 작동 (FFmpeg 필요) |

### 역할

기존 YouTube 영상을 AI를 활용하여 새로운 영상으로 재창작합니다:
1. YouTube 자막(스크립트) 추출
2. AI로 캐릭터/제품 분석
3. 새로운 스크립트 생성
4. AI 이미지 생성 (Nano Banana Pro)
5. 이미지를 영상으로 변환 (Kling 2.1)
6. 한국어 TTS 생성 (ElevenLabs)
7. 영상 조립 및 YouTube 업로드

### 처리 흐름

```
┌─────────────────────────────────────────────────────────────────┐
│                    Phase 1: 입력 및 준비                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Google Sheets Trigger (1분 폴링)                               │
│         │                                                       │
│         ▼                                                       │
│  Filter Pending (Status="pending" 필터링)                       │
│         │                                                       │
│         ▼                                                       │
│  Update Status → "processing"                                   │
│         │                                                       │
│         ▼                                                       │
│  Extract Transcript (youtube-transcript.io)                     │
│         │                                                       │
│    ┌────┴────┐                                                  │
│    │         │                                                  │
│   있음      없음 → Set Error → Update Error → 종료              │
│    │                                                            │
│    ▼                                                            │
│  Update Original_Script                                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Phase 2: AI 분석                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Download Video (yt-dlp) ⚠️ FFmpeg 필요                         │
│         │                                                       │
│         ▼                                                       │
│  Extract Keyframes (FFmpeg) ⚠️ FFmpeg 필요                      │
│         │                                                       │
│         ▼                                                       │
│  Analyze Images with AI (OpenAI Vision)                         │
│         │                                                       │
│         ▼                                                       │
│  Generate New Script (GPT-4)                                    │
│         │                                                       │
│         ▼                                                       │
│  Generate Image Prompts (GPT-4)                                 │
│         │                                                       │
│         ▼                                                       │
│  Update AI Analysis in Sheets                                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    │                   │
                    ▼                   ▼
┌───────────────────────┐   ┌───────────────────────┐
│  Phase 3: 이미지 생성   │   │  Phase 4: TTS 생성     │
├───────────────────────┤   ├───────────────────────┤
│                       │   │                       │
│  Split Image Prompts  │   │  Create TTS Task      │
│         │             │   │  (Kie.ai ElevenLabs)  │
│         ▼             │   │         │             │
│  ┌─────────────┐      │   │         ▼             │
│  │ Loop (5회)  │      │   │  Wait 2 Min           │
│  │    │        │      │   │         │             │
│  │    ▼        │      │   │         ▼             │
│  │ Create Task │      │   │  Poll Status          │
│  │ (Nano Banana)│     │   │         │             │
│  │    │        │      │   │    ┌────┴────┐        │
│  │    ▼        │      │   │   완료      진행중     │
│  │ Wait+Poll   │      │   │    │         │        │
│  │    │        │      │   │    ▼         └─────┐  │
│  │    ▼        │      │   │ Download Audio     │  │
│  │ Store Image │      │   │    │          Wait │  │
│  │    │        │      │   │    ▼          2Min │  │
│  └────┴────────┘      │   │ Update Audio_URL   │  │
│         │             │   │                    │  │
│         ▼             │   └────────────────────┘  │
│  Collect All Images   │                           │
│         │             │                           │
│         ▼             │                           │
│  Update Generated_    │                           │
│  Images in Sheets     │                           │
│                       │                           │
└───────────────────────┘                           │
          │                                         │
          ▼                                         │
┌─────────────────────────────────────────────────────────────────┐
│                    Phase 5: 영상 생성                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Split Generated Images                                         │
│         │                                                       │
│         ▼                                                       │
│  ┌─────────────┐                                                │
│  │ Loop (5회)  │                                                │
│  │    │        │                                                │
│  │    ▼        │                                                │
│  │ Create Video│                                                │
│  │ Task (Kling)│                                                │
│  │    │        │                                                │
│  │    ▼        │                                                │
│  │ Wait 5 Min  │                                                │
│  │ + Poll      │                                                │
│  │    │        │                                                │
│  │    ▼        │                                                │
│  │ Store Video │                                                │
│  └────┴────────┘                                                │
│         │                                                       │
│         ▼                                                       │
│  Collect All Videos                                             │
│         │                                                       │
│         ▼                                                       │
│  Update Video_Clips in Sheets                                   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Phase 6: 조립 및 업로드                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Create Filelist (FFmpeg용)                                     │
│         │                                                       │
│         ▼                                                       │
│  Write Filelist ⚠️ FFmpeg 필요                                  │
│         │                                                       │
│         ▼                                                       │
│  Concat Video Clips ⚠️ FFmpeg 필요                              │
│         │                                                       │
│         ▼                                                       │
│  Merge Audio with Video ⚠️ FFmpeg 필요                          │
│         │                                                       │
│         ▼                                                       │
│  Read Video File                                                │
│         │                                                       │
│         ▼                                                       │
│  Init YouTube Upload (Resumable)                                │
│         │                                                       │
│         ▼                                                       │
│  Upload Video Data                                              │
│         │                                                       │
│         ▼                                                       │
│  Extract Video ID                                               │
│         │                                                       │
│         ▼                                                       │
│  Update YouTube_Video_ID in Sheets                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Phase 7: 완료                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Calculate Cost (~$0.89)                                        │
│         │                                                       │
│         ▼                                                       │
│  Set Completed Status                                           │
│         │                                                       │
│         ▼                                                       │
│  Send Success Email                                             │
│         │                                                       │
│         ▼                                                       │
│  Update Final Status → "completed"                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 주요 노드 설명

| 단계 | 노드 | 역할 |
|-----|------|------|
| 입력 | Google Sheets Trigger | 1분마다 시트 폴링 |
| 입력 | Filter Pending | Status="pending" 행만 선택 |
| 입력 | Extract Transcript | YouTube 자막 추출 (무료 API) |
| AI 분석 | Download Video | yt-dlp로 영상 다운로드 ⚠️ |
| AI 분석 | Extract Keyframes | FFmpeg로 키프레임 추출 ⚠️ |
| AI 분석 | Analyze Images with AI | OpenAI Vision으로 이미지 분석 |
| AI 분석 | Generate New Script | GPT-4로 새 스크립트 생성 |
| AI 분석 | Generate Image Prompts | GPT-4로 이미지 프롬프트 생성 |
| 이미지 | Split Image Prompts | 프롬프트를 1개씩 분리 |
| 이미지 | Create Image Generation Task | Kie.ai Nano Banana Pro API |
| 이미지 | Wait + Poll | 2분 대기 + 상태 확인 (최대 10분) |
| 영상 | Create Video Generation Task | Kie.ai Kling 2.1 API |
| 영상 | Wait + Poll | 5분 대기 + 상태 확인 (최대 10분) |
| TTS | Create TTS Task | Kie.ai ElevenLabs API |
| 조립 | Concat Video Clips | FFmpeg로 영상 연결 ⚠️ |
| 조립 | Merge Audio with Video | FFmpeg로 오디오 합성 ⚠️ |
| 업로드 | Init YouTube Upload | YouTube Resumable Upload 시작 |
| 업로드 | Upload Video Data | 영상 데이터 업로드 |
| 완료 | Calculate Cost | 비용 계산 (~$0.89) |
| 완료 | Send Success Email | 성공 이메일 발송 |

### 현재 작동 상태

| 기능 | 상태 | 비고 |
|-----|------|------|
| 자막 추출 | ✅ 작동 | youtube-transcript.io |
| TTS 생성 | ✅ 작동 | Kie.ai ElevenLabs |
| 이메일 알림 | ✅ 작동 | Gmail |
| 상태 관리 | ✅ 작동 | Google Sheets |
| 영상 다운로드 | ⚠️ 차단됨 | yt-dlp 필요 |
| 키프레임 추출 | ⚠️ 차단됨 | FFmpeg 필요 |
| AI 이미지 분석 | ⚠️ 차단됨 | 키프레임 필요 |
| 이미지 생성 | ⚠️ 차단됨 | 분석 결과 필요 |
| 영상 조립 | ⚠️ 차단됨 | FFmpeg 필요 |
| YouTube 업로드 | ⚠️ 차단됨 | 조립된 영상 필요 |

---

## 워크플로우 3: 쇼핑 숏츠

### 기본 정보

| 항목 | 값 |
|-----|-----|
| **이름** | Shopping Shorts |
| **ID** | `0spzlwZO5DwCoSdt` |
| **노드 수** | 32 |
| **트리거** | Google Sheets (1분마다 폴링) |
| **예상 비용** | ~$0.50-0.75/영상 |
| **상태** | 차단됨 (FFmpeg 필요) |

### 역할

쇼핑 영상에서 텍스트/워터마크를 제거하여 깨끗한 영상을 생성합니다:
1. 영상 다운로드
2. 장면 감지 및 프레임 추출
3. AI 인페인팅으로 텍스트/워터마크 제거
4. 정제된 프레임으로 영상 재조립
5. YouTube 업로드

### 처리 흐름

```
┌─────────────────────────────────────────────────────────────────┐
│                    Phase 1: 입력 및 준비                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Google Sheets Trigger (1분 폴링)                               │
│         │                                                       │
│         ▼                                                       │
│  Filter Pending (Status="pending")                              │
│         │                                                       │
│         ▼                                                       │
│  Update Status → "processing"                                   │
│         │                                                       │
│         ▼                                                       │
│  Download Video (HTTP Request)                                  │
│         │                                                       │
│         ▼                                                       │
│  Save Video to Temp ⚠️ FFmpeg 필요                              │
│         │                                                       │
│         ▼                                                       │
│  FFmpeg Scene Detection ⚠️ FFmpeg 필요                          │
│         │                                                       │
│         ▼                                                       │
│  List Extracted Frames (최대 20개)                              │
│         │                                                       │
│         ▼                                                       │
│  Generate Frame URLs                                            │
│         │                                                       │
│         ▼                                                       │
│  Update Frame Data in Sheets                                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Phase 2: AI 인페인팅                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Split Frames for Inpainting                                    │
│         │                                                       │
│         ▼                                                       │
│  ┌────────────────────────────────────┐                         │
│  │ Loop (프레임당)                     │                         │
│  │    │                               │                         │
│  │    ▼                               │                         │
│  │ Parse Single Frame                 │                         │
│  │    │                               │                         │
│  │    ▼                               │                         │
│  │ Create Inpainting Task             │                         │
│  │ (Kie.ai Nano Banana Edit)          │                         │
│  │    │                               │                         │
│  │    ▼                               │                         │
│  │ Wait 2 Min                         │                         │
│  │    │                               │                         │
│  │    ▼                               │                         │
│  │ Poll Inpainting Status             │                         │
│  │    │                               │                         │
│  │    ├────────────┐                  │                         │
│  │   완료         진행중 → Wait 2 Min  │                         │
│  │    │              └────────────────┤                         │
│  │    ▼                               │                         │
│  │ Store Cleaned Frame                │                         │
│  │    │                               │                         │
│  └────┴───────────────────────────────┘                         │
│         │                                                       │
│         ▼                                                       │
│  Collect All Cleaned Frames                                     │
│         │                                                       │
│         ▼                                                       │
│  Format Cleaned Frame URLs                                      │
│         │                                                       │
│         ▼                                                       │
│  Update Clean_Frames in Sheets                                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Phase 3: 조립 및 업로드                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  FFmpeg Reassemble Frames ⚠️ FFmpeg 필요                        │
│         │                                                       │
│         ▼                                                       │
│  Read Video File                                                │
│         │                                                       │
│         ▼                                                       │
│  Init YouTube Upload                                            │
│         │                                                       │
│         ▼                                                       │
│  Upload Video Data                                              │
│         │                                                       │
│         ▼                                                       │
│  Extract Video ID                                               │
│         │                                                       │
│         ▼                                                       │
│  Calculate Cost (~$0.50-0.75)                                   │
│         │                                                       │
│         ▼                                                       │
│  Send Success Email                                             │
│         │                                                       │
│         ▼                                                       │
│  Update Status Completed                                        │
│         │                                                       │
│         ▼                                                       │
│  Cleanup Temp Files ⚠️ FFmpeg 필요                              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 주요 노드 설명

| 단계 | 노드 | 역할 |
|-----|------|------|
| 입력 | Google Sheets Trigger | 1분마다 시트 폴링 |
| 입력 | Filter Pending | Status="pending" 행만 선택 |
| 입력 | Download Video | HTTP로 영상 다운로드 |
| 프레임 | FFmpeg Scene Detection | 장면 감지 + 프레임 추출 ⚠️ |
| 프레임 | List Extracted Frames | 추출된 프레임 목록 (최대 20개) |
| 인페인팅 | Split Frames for Inpainting | 프레임을 1개씩 분리 |
| 인페인팅 | Create Inpainting Task | Kie.ai Nano Banana Edit API |
| 인페인팅 | Wait + Poll | 2분 대기 + 상태 확인 (최대 10분) |
| 조립 | FFmpeg Reassemble Frames | 정제된 프레임으로 영상 조립 ⚠️ |
| 업로드 | Init YouTube Upload | YouTube Resumable Upload |
| 완료 | Calculate Cost | 비용 계산 (~$0.50-0.75) |
| 완료 | Cleanup Temp Files | 임시 파일 정리 ⚠️ |

### 비용 구조

| 항목 | 단가 | 수량 | 비용 |
|-----|-----|-----|-----|
| 인페인팅 | $0.05/프레임 | 10-15개 | $0.50-0.75 |
| **총 비용** | | | **$0.50-0.75/영상** |

---

## 워크플로우 4: 에러 핸들러

### 기본 정보

| 항목 | 값 |
|-----|-----|
| **이름** | YouTube Recreation - Error Handler |
| **ID** | `kJaaNoxojbrPhSk9` |
| **노드 수** | 4 |
| **트리거** | Error Trigger (오류 발생 시 자동) |
| **상태** | 준비 완료 |

### 역할

메인 워크플로우에서 오류가 발생하면 자동으로 실행되어:
1. 오류 정보 추출
2. Google Sheets 상태 업데이트 (Status → "failed")
3. 오류 메시지 기록

### 처리 흐름

```
┌─────────────────────────────────────────────────────────────────┐
│                    에러 핸들러 흐름                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Error Trigger (메인 워크플로우에서 오류 발생)                      │
│         │                                                       │
│         ▼                                                       │
│  ┌─────────────────────────────────────┐                        │
│  │ Extract Error Info                  │                        │
│  │ • error_message: 오류 메시지         │                        │
│  │ • failed_node: 실패한 노드 이름      │                        │
│  │ • timestamp: 발생 시간              │                        │
│  │ • youtube_url: 처리 중이던 URL      │                        │
│  │ • row_id: 행 ID                     │                        │
│  └─────────────────────────────────────┘                        │
│         │                                                       │
│         ▼                                                       │
│  ┌─────────────────────────────────────┐                        │
│  │ Set Error Status                    │                        │
│  │ • Status: "failed"                  │                        │
│  │ • Error_Message: 상세 오류 내용      │                        │
│  │ • Completed_At: 타임스탬프          │                        │
│  └─────────────────────────────────────┘                        │
│         │                                                       │
│         ▼                                                       │
│  ┌─────────────────────────────────────┐                        │
│  │ Update Error in Sheets              │                        │
│  │ → Google Sheets 상태 업데이트        │                        │
│  └─────────────────────────────────────┘                        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 노드 상세

| # | 노드 이름 | 타입 | 역할 |
|---|----------|------|------|
| 1 | Error Trigger | 에러 트리거 | 메인 워크플로우 오류 감지 |
| 2 | Extract Error Info | Code | 오류 정보 추출 (JavaScript) |
| 3 | Set Error Status | Set | 상태 값 설정 |
| 4 | Update Error in Sheets | Google Sheets | 시트에 오류 기록 |

### 오류 메시지 형식

```
Error in [실패한 노드 이름]: [오류 메시지]
```

예시:
```
Error in Extract Transcript: Network timeout after 30 seconds
```

### 연결된 워크플로우

- **YouTube Recreation** (`0tjUeM01oq32zrOK`): `settings.errorWorkflow` 설정됨
- **Shopping Shorts** (`0spzlwZO5DwCoSdt`): `settings.errorWorkflow` 설정됨

---

## 비용 분석

### 워크플로우별 비용

| 워크플로우 | 서비스 | 단가 | 수량 | 소계 |
|-----------|-------|-----|-----|-----|
| **YouTube 재창작** | | | | |
| | 자막 추출 | $0.00 | 1 | $0.00 |
| | AI 분석 (OpenAI) | $0.04 | 1 | $0.04 |
| | 이미지 생성 (Nano Banana) | $0.04 | 5 | $0.20 |
| | 영상 생성 (Kling 2.1) | $0.10 | 5 | $0.50 |
| | TTS (ElevenLabs) | $0.15 | 1 | $0.15 |
| | **소계** | | | **$0.89** |
| **쇼핑 숏츠** | | | | |
| | 인페인팅 (Nano Banana Edit) | $0.05 | 10-15 | $0.50-0.75 |
| | **소계** | | | **$0.50-0.75** |

### 월간 비용 추정

| 처리량 | YouTube 재창작 | 쇼핑 숏츠 | 총 비용 |
|-------|--------------|----------|--------|
| 10영상/월 | $8.90 | $5.00-7.50 | $13.90-16.40 |
| 50영상/월 | $44.50 | $25.00-37.50 | $69.50-82.00 |
| 100영상/월 | $89.00 | $50.00-75.00 | $139.00-164.00 |

---

## 인프라 요구사항

### 현재 상태

현재 n8n 인스턴스는 **클라우드 호스팅** (`https://n8n.srv1262632.hstgr.cloud`)입니다.

클라우드 n8n에는 다음이 **설치되어 있지 않습니다**:
- ❌ FFmpeg (영상 처리)
- ❌ yt-dlp (YouTube 영상 다운로드)

### 영향

| 기능 | 상태 | 이유 |
|-----|------|------|
| 자막 추출 | ✅ 작동 | HTTP API만 사용 |
| TTS 생성 | ✅ 작동 | HTTP API만 사용 |
| 영상 다운로드 | ❌ 차단 | yt-dlp 필요 |
| 키프레임 추출 | ❌ 차단 | FFmpeg 필요 |
| 영상 조립 | ❌ 차단 | FFmpeg 필요 |
| YouTube 업로드 | ❌ 차단 | 조립된 영상 필요 |

### 해결 방안

#### 옵션 1: 셀프 호스팅 n8n (권장)

```bash
# Docker Compose 예시
version: '3.8'
services:
  n8n:
    image: n8nio/n8n
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=admin
      - N8N_BASIC_AUTH_PASSWORD=your_password
    volumes:
      - ~/.n8n:/home/node/.n8n
    ports:
      - "5678:5678"
    depends_on:
      - ffmpeg-service

  ffmpeg-service:
    image: linuxserver/ffmpeg
    volumes:
      - /tmp:/tmp
```

**장점**: 완전한 제어, 낮은 비용 (~$0.89/영상)
**단점**: 서버 관리 필요

#### 옵션 2: 외부 영상 처리 API

- Cloudinary
- FFmpeg.live
- Shotstack

**장점**: 서버 관리 불필요
**단점**: 높은 비용 (~$5-10/영상)

#### 옵션 3: 하이브리드 아키텍처

```
n8n Cloud → Webhook → 영상 처리 서버 → Callback → n8n
```

**장점**: 유연한 구조
**단점**: 복잡한 설정

---

## 부록: 상태 흐름

### Status 값 정의

| 상태 | 의미 | 전환 조건 |
|-----|------|---------|
| `pending` | 처리 대기 | 사용자가 새 행 추가 |
| `processing` | 처리 중 | 워크플로우 시작 시 |
| `completed` | 완료 | 모든 처리 성공 |
| `failed` | 실패 | 오류 발생 시 |

### 상태 전환 다이어그램

```
┌─────────┐
│ pending │ (사용자 입력)
└────┬────┘
     │
     ▼ (워크플로우 시작)
┌─────────────┐
│ processing  │
└──────┬──────┘
       │
  ┌────┴────┐
  │         │
 성공      실패
  │         │
  ▼         ▼
┌─────────┐ ┌────────┐
│completed│ │ failed │
└─────────┘ └────────┘
```

---

## 부록: API 엔드포인트

### 사용 중인 외부 API

| 서비스 | 엔드포인트 | 용도 |
|-------|-----------|------|
| youtube-transcript.io | `GET https://youtube-transcript.io/api/transcript?url={url}` | 자막 추출 |
| OpenAI Vision | `POST https://api.openai.com/v1/chat/completions` | 이미지 분석 |
| OpenAI GPT-4 | `POST https://api.openai.com/v1/chat/completions` | 스크립트/프롬프트 생성 |
| Kie.ai | `POST https://api.kie.ai/api/v1/jobs/createTask` | 이미지/영상/TTS 생성 |
| Kie.ai | `GET https://api.kie.ai/api/v1/jobs/{task_id}` | 작업 상태 확인 |
| YouTube API v3 | `POST https://www.googleapis.com/upload/youtube/v3/videos` | 영상 업로드 |

---

**문서 작성**: Atlas (Orchestrator)  
**버전**: 1.0  
**최종 수정**: 2026-01-27
